# █░█░█ █ █▄░█ █▀▄ █▀█ █░█░█   █▀█ █░█ █░░ █▀▀ █▀
# ▀▄▀▄▀ █ █░▀█ █▄▀ █▄█ ▀▄▀▄▀   █▀▄ █▄█ █▄▄ ██▄ ▄█
# OPTIMIZED FOR PRODUCTIVITY & BLOGGING WORKFLOW

# See https://wiki.hyprland.org/Configuring/Window-Rules/

# Override shorthand for hyde theme compatibility
$&=override

# ===========================
#  PRODUCTIVITY VARIABLES
# ===========================

# Opacity levels optimized for focus and readability
$opacity_focus = 0.95      # Primary work applications (high focus)
$opacity_work = 0.85       # Secondary work tools
$opacity_utility = 0.75    # System utilities and background apps
$opacity_social = 0.70     # Communication and entertainment

# ===========================
#  SYSTEM BEHAVIOR RULES
# ===========================

# Prevent screen lock during media consumption (productivity videos, tutorials)
windowrule = idleinhibit fullscreen, class:^(.*celluloid.*)$|^(.*mpv.*)$|^(.*vlc.*)$
windowrule = idleinhibit fullscreen, class:^(.*[Ss]potify.*)$
windowrule = idleinhibit fullscreen, class:^(.*LibreWolf.*)$|^(.*floorp.*)$|^(.*brave-browser.*)$|^(.*firefox.*)$|^(.*chromium.*)$|^(.*zen.*)$|^(.*vivaldi.*)$|^(.*qutebrowser.*)$

# Picture-in-Picture for research videos and tutorials
windowrule = float, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrule = keepaspectratio, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrule = move 72% 70%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$ 
windowrule = size 26% 26%, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrule = pin, title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# ===========================
#  OPACITY RULES - PRODUCTIVITY FOCUSED
# ===========================

# PRIMARY WORK APPLICATIONS (High focus, minimal transparency)
windowrule = opacity $opacity_focus $& $opacity_focus $& 1,class:^(org.gnome.TextEditor)$
windowrule = opacity $opacity_focus $& $opacity_focus $& 1,class:^(obsidian)$
windowrule = opacity $opacity_focus $& $opacity_focus $& 1,class:^(org.gnome.gitlab.somas.Apostrophe)$
windowrule = opacity $opacity_focus $& $opacity_focus $& 1,class:^(org.qutebrowser.qutebrowser)$

# BROWSERS (Research and secondary tasks)
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(firefox)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(brave-browser)$

# DEVELOPMENT & TERMINAL
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(kitty)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(code-oss)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^([Cc]ode)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(code-url-handler)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(cursor)$
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(zed)$

# FILE MANAGEMENT
windowrule = opacity $opacity_work $& $opacity_work $& 1,class:^(org.kde.dolphin)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(org.kde.ark)$

# SYSTEM UTILITIES (Lower opacity for background awareness)
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(nwg-look)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(qt5ct)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(qt6ct)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(kvantummanager)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(org.pulseaudio.pavucontrol)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(blueman-manager)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(nm-applet)$
windowrule = opacity $opacity_utility $& $opacity_utility $& 1,class:^(nm-connection-editor)$

# COMMUNICATION & ENTERTAINMENT (Lowest focus opacity)
windowrule = opacity $opacity_social $& $opacity_social $& 1,class:^([Ss]potify)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,initialTitle:^(Spotify Free)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,initialTitle:^(Spotify Premium)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,class:^(BeeperTexts)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,class:^(discord)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,class:^(vesktop)$
windowrule = opacity $opacity_social $& $opacity_social $& 1,class:^(WebCord)$

# AUTHENTICATION & SECURITY (Opaque for security)
windowrule = opaque, class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrule = opaque, class:^(polkit-gnome-authentication-agent-1)$
windowrule = opaque, class:^(.*[Pp]assword.*)$
windowrule = opaque, class:^(.*[Aa]uth.*)$

# ===========================
#  FLOATING WINDOW RULES
# ===========================

# PRODUCTIVITY TOOL DIALOGS (Proper sizing for efficiency)
windowrule = float, size 900 600, center, class:^(org.pulseaudio.pavucontrol)$
windowrule = float, size 800 500, center, class:^(blueman-manager)$
windowrule = float, size 700 400, center, class:^(nm-connection-editor)$
windowrule = float, size 600 400, center, class:^(kvantummanager)$
windowrule = float, size 600 400, center, class:^(qt5ct)$
windowrule = float, size 600 400, center, class:^(qt6ct)$
windowrule = float, size 500 300, center, class:^(nwg-look)$

# GNOME Calculator – Floating and Centered
windowrule = float, class:^(org.gnome.Calculator)$
windowrule = size 500 700, class:^(org.gnome.Calculator)$
windowrule = center, class:^(org.gnome.Calculator)$

# MEDIA & UTILITIES
windowrule = float, class:^(vlc)$
windowrule = float, size 400 300, center, class:^(org.kde.ark)$

# AUTHENTICATION DIALOGS (Small, centered, secure)
windowrule = float, size 400 200, center, class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrule = float, size 400 200, center, class:^(polkit-gnome-authentication-agent-1)$

# DOLPHIN SPECIFIC DIALOGS (Productivity-focused sizing)
windowrule = float, size 600 400, center, class:^(org.kde.dolphin)$,title:^(Progress Dialog — Dolphin)$
windowrule = float, size 600 400, center, class:^(org.kde.dolphin)$,title:^(Copying — Dolphin)$

# BROWSER DIALOGS (Don't interfere with workflow)
windowrule = float, size 500 300, center, title:^(About Mozilla Firefox)$
windowrule = float, class:^(firefox)$,title:^(Library)$

# TERMINAL UTILITIES (Quick access floating)
windowrule = float, size 800 600, center, class:^(kitty)$,title:^(top)$
windowrule = float, size 800 600, center, class:^(kitty)$,title:^(btop)$
windowrule = float, size 800 600, center, class:^(kitty)$,title:^(htop)$

# UNIVERSAL FILE DIALOGS (Optimized for productivity workflow)
windowrule = float, size 900 600, center, title:^(Open)$
windowrule = float, size 900 600, center, title:^(Save As)$
windowrule = float, size 900 600, center, title:^(Choose Files)$
windowrule = float, size 800 500, center, title:^(Add Folder to Workspace)$
windowrule = float, size 900 600, center, initialtitle:^(Open File)$
windowrule = float, size 700 400, center, title:^(Authentication Required)$
windowrule = float, size 600 300, center, title:^(Confirm to replace files)$
windowrule = float, size 600 200, center, title:^(File Operation Progress)$

# PORTAL & SYSTEM DIALOGS
windowrule = float, center, class:^([Xx]dg-desktop-portal-gtk)$
windowrule = float, size 800 500, center, title:^(File Upload)(.*)$
windowrule = float, size 900 600, center, title:^(Choose wallpaper)(.*)$
windowrule = float, center, class:^(.*dialog.*)$
windowrule = float, center, title:^(.*dialog.*)$

# ===========================
#  LAYER RULES (UI POLISH)
# ===========================

# Rofi launcher (smooth, focused experience)
layerrule = blur, rofi
layerrule = ignorezero, rofi

# Notification system (non-intrusive)
layerrule = blur, notifications
layerrule = ignorezero, notifications
layerrule = blur, swaync-notification-window
layerrule = ignorezero, swaync-notification-window
layerrule = blur, swaync-control-center
layerrule = ignorezero, swaync-control-center

# System dialogs
layerrule = blur, logout_dialog

# ===========================
#  PRODUCTIVITY ENHANCEMENTS
# ===========================

# Float and center dialog windows
windowrulev2 = float, title:^(.*(Settings|Preferences|Options|Configuration|Properties|About).*)$
windowrulev2 = center, title:^(.*(Settings|Preferences|Options|Configuration|Properties|About).*)$
windowrulev2 = size 800 600, title:^(.*(Settings|Preferences|Options|Configuration|Properties|About).*)$

# Float system dialogs
windowrulev2 = float, title:^(.*(Dialog|Modal|Authentication|Permission).*)$
windowrulev2 = center, title:^(.*(Dialog|Modal|Authentication|Permission).*)$

# File picker dialogs should float and center
windowrulev2 = float, title:^(.*(Open|Save|Choose Files|File Upload|Select File).*)$
windowrulev2 = center, title:^(.*(Open|Save|Choose Files|File Upload|Select File).*)$
windowrulev2 = size 900 700, title:^(.*(Open|Save|Choose Files|File Upload|Select File).*)$

# Pin important system dialogs
windowrulev2 = pin, class:^(org.kde.polkit-kde-authentication-agent-1)$
windowrulev2 = pin, title:^(Authentication Required|Permission Required)$
windowrulev2 = pin, class:^(org.freedesktop.impl.portal.desktop.gtk)$

# ===========================
#  FOCUS & PERFORMANCE RULES
# ===========================

# Prevent focus stealing during deep work
windowrulev2 = noinitialfocus, class:^([Ss]potify)$
windowrulev2 = noinitialfocus, class:^(discord|Discord)$
windowrulev2 = noinitialfocus, class:^(BeeperTexts|Beeper)$
windowrulev2 = noinitialfocus, class:^(Slack|slack)$

# Immediate rendering for productivity apps
windowrulev2 = immediate, class:^(org.gnome.TextEditor)$
windowrulev2 = immediate, class:^(obsidian)$
windowrulev2 = immediate, class:^(org.gnome.gitlab.somas.Apostrophe)$
windowrulev2 = immediate, class:^(kitty)$
windowrulev2 = immediate, class:^(org.qutebrowser.qutebrowser)$

# Workspace-specific opacity for focus (optional)
windowrulev2 = opacity 0.95, class:^(kitty)$
windowrulev2 = opacity 0.98, class:^(org.gnome.TextEditor|obsidian)$

# ===========================
#  SPECIAL OVERRIDES
# ===========================

# Emergency fallbacks - if an app opens in wrong workspace
windowrulev2 = workspace 1, class:^(org.gnome.TextEditor)$, title:^(?!.*(Settings|Preferences|Configuration)).*$
windowrulev2 = workspace 4, class:^(obsidian)$, title:^(?!.*(Settings|Preferences|Configuration)).*$

# Keep related windows together
windowrulev2 = workspace 2, class:^(kitty)$, title:^(?!.*(htop|btop|top|System Monitor)).*$

# Picture-in-picture windows should float and stay on top
windowrulev2 = float, title:^(.*(Picture-in-Picture|PiP).*)$
windowrulev2 = pin, title:^(.*(Picture-in-Picture|PiP).*)$
windowrulev2 = size 640 360, title:^(.*(Picture-in-Picture|PiP).*)$

# =====================
# Workspace rules
# =====================

# WORKSPACE 1: FILE MGMT & LIGHT EDITORS
windowrulev2 = workspace 1 silent, class:^(dolphin)$

# WORKSPACE 2: TERMINAL & DEVELOPMENT
windowrulev2 = workspace 2 silent, class:^(kitty)$
windowrulev2 = fullscreen, class:^(kitty)$

# WORKSPACE 3: WEB BROWSING
windowrulev2 = workspace 3 silent, class:^(org.qutebrowser.qutebrowser)$
windowrulev2 = workspace 3 silent, class:^(firefox|Firefox|brave-browser|Brave-browser)$

# WORKSPACE 4: KNOWLEDGE MGMT (NOTES, WIKI, RESEARCH)
windowrulev2 = workspace 4 silent, class:^(obsidian)$
windowrulev2 = fullscreen, class:^(obsidian)$
windowrulev2 = workspace 4 silent, class:^(org.gnome.gitlab.somas.Apostrophe)$
windowrulev2 = fullscreen, class:^(org.gnome.gitlab.somas.Apostrophe)$
# WORKSPACE 5: COMMUNICATION
windowrulev2 = workspace 5 silent, class:^(BeeperTexts|Beeper|discord|Discord|Slack|slack)$
windowrulev2 = maximize, class:^(BeeperTexts|Beeper|discord|Discord|Slack|slack)$

# WORKSPACE 6: MEDIA & ENTERTAINMENT
windowrulev2 = workspace 6 silent, class:^([Ss]potify|vlc|mpv|io.freetubeapp.FreeTube|freetube)$
windowrulev2 = maximize, class:^([Ss]potify|vlc|mpv|io.freetubeapp.FreeTube|freetube)$
